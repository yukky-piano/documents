## プロトタイプ
* クラスという概念がない
* オブジェクトの元となるオブジェクト
* 縛りの弱いクラスのようなもの
* 基本的にインスタンスへ参照渡しになる

## this
* 参照先は条件によって変化する。先ずは一覧。

|場所|thisの参照先|
| :- | :- |
| トップレベル | グローバルオブジェクト |
| 関数 | グローバルオブジェクト（strictモードはundefined） |
| call / applyメソッド | 引数で指定されたオブジェクト |
| イベントリスナー | イベントの発生元 |
| コンストラクター | 生成したインスタンス |
| メソッド | 呼び出し元のオブジェクト（＝レシーバーオブジェクト） |

* call / applyメソッド   
違いは引数の指定方法
    * callメソッド：個々の値で指定
    * applyメソッド：配列

```javascript
var data = 'Global data';
var obj1 = { data: 'obj1 data'};
var obj2 = { data: 'obj2 data'};

function hoge() {
  console.log(this.data);
}

hoge.call(null); // 結果：Global data
hoge.call(obj1); // 結果：obj1 data
hoge.call(obj2); // 結果：obj2 data
```

※**nullを渡すと**暗黙的に**グローバルオブジェクト**が渡される

## prototypeプロパティ
* 参照渡しになるプロパティなので、基本キャッシュに１つだけ存在
* 後から追加してもOK

```javascript
var Member = function(firstName, lastName) {
  this.firstName = firstName;
  this.lastName = lastname;
}
var mem = newMember('太郎', '山田');
// インスタンス化後にメソッドを追加
Member.protototype.getName = function() {
  return this.lastName + ' ' + this.firstName;
}
console.log(mem.getName()); // 結果：山田 太郎
```

* インスタンスへプロパティの追加と削除
    * 追加と削除
    ```javascript
    var Member = function() {};
    Member.prototype.sex = '男';
    var mem1 = new Member();
    var mem2 = new Member();
    console.log(mem1.sex + '|' + mem2.sex); // 結果：男|男
    mem2.sex = '女';
    console.log(mem1.sex + '|' + mem2.sex); // 結果：男|女
    delete mem1.sex
    delete mem2.sex
    // プロトタイプまでさかのぼって削除することはない
    console.log(mem1.sex + '|' + mem2.sex); // 結果：男|男
    ```
    * undefinedすると、考え方的に不思議だが、**undefinedが存在する状況**となる
    ```javascript
    // 上の状態から
    mem1.sex = undefined;
    for (var key in mem1) {
      console.log(key + '：' + mem1[key]);
    }  // 結果：sex：undefined
    ```

* 〇〇.prototype.～の記述について、こんな書き方して最小限に留めるべきかも
```javascript
var Member = function(firstName, lastName) {
  this.firstName = firstName;
  this.lastName = lastName;
}
Member.prototype = {
  getName : function() {
    return this.lastName + ' ' + this.firstName;
  },
  toString: function() {
    return this.lastName + this.firstName;
  }
};
